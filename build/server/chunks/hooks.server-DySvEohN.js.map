{"version":3,"file":"hooks.server-DySvEohN.js","sources":["../../../.svelte-kit/adapter-node/chunks/hooks.server.js"],"sourcesContent":["import { b as sessionCookieName, v as validateSessionToken, s as setSessionTokenCookie, d as deleteSessionTokenCookie } from \"./auth.js\";\nconst handleAuth = async ({ event, resolve }) => {\n  const sessionToken = event.cookies.get(sessionCookieName);\n  if (!sessionToken) {\n    event.locals.user = null;\n    event.locals.session = null;\n    return resolve(event);\n  }\n  const { session, user } = await validateSessionToken(sessionToken);\n  if (session) {\n    setSessionTokenCookie(event, sessionToken, session.expiresAt);\n  } else {\n    deleteSessionTokenCookie(event);\n  }\n  event.locals.user = user;\n  event.locals.session = session;\n  return resolve(event);\n};\nconst handle = handleAuth;\nexport {\n  handle\n};\n"],"names":[],"mappings":";;;;;;;;;AACA,MAAM,UAAU,GAAG,OAAO,EAAE,KAAK,EAAE,OAAO,EAAE,KAAK;AACjD,EAAE,MAAM,YAAY,GAAG,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,iBAAiB,CAAC;AAC3D,EAAE,IAAI,CAAC,YAAY,EAAE;AACrB,IAAI,KAAK,CAAC,MAAM,CAAC,IAAI,GAAG,IAAI;AAC5B,IAAI,KAAK,CAAC,MAAM,CAAC,OAAO,GAAG,IAAI;AAC/B,IAAI,OAAO,OAAO,CAAC,KAAK,CAAC;AACzB;AACA,EAAE,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,GAAG,MAAM,oBAAoB,CAAC,YAAY,CAAC;AACpE,EAAE,IAAI,OAAO,EAAE;AACf,IAAI,qBAAqB,CAAC,KAAK,EAAE,YAAY,EAAE,OAAO,CAAC,SAAS,CAAC;AACjE,GAAG,MAAM;AACT,IAAI,wBAAwB,CAAC,KAAK,CAAC;AACnC;AACA,EAAE,KAAK,CAAC,MAAM,CAAC,IAAI,GAAG,IAAI;AAC1B,EAAE,KAAK,CAAC,MAAM,CAAC,OAAO,GAAG,OAAO;AAChC,EAAE,OAAO,OAAO,CAAC,KAAK,CAAC;AACvB,CAAC;AACI,MAAC,MAAM,GAAG;;;;"}